@model CallApi.Models.User.ProductComments
@{
    ViewData["Title"] = "Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<div class="content">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="box">
                    <!-- product-description -->
                    <div class="box-body">
                        <div class="row">
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
                                <ul id="demo1_thumbs" class="slideshow_thumbs">
                                    @foreach (var item in ViewBag.productImage.Images.Split(new[] { ';' }, StringSplitOptions.RemoveEmptyEntries))
                                    {
                                        <li>
                                            <div class=" thumb-img">
                                                <img src="@ViewBag.domain@item" />
                                            </div>
                                        </li>
                                    }

                                </ul>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                <div id="slideshow">
                                    <img src="@ViewBag.domain@ViewBag.productImage.Thumb" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <div class="product-single">
                                    <h2>@ViewBag.product.ProductName</h2>
                                    <div class="product-rating">
                                        <span><i class="fa fa-star"></i></span>
                                        <span><i class="fa fa-star"></i></span>
                                        <span><i class="fa fa-star"></i></span>
                                        <span><i class="fa fa-star"></i></span>
                                        <span><i class="fa fa-star-o"></i></span>
                                        <span class="text-secondary">&nbsp;(12 đánh giá)</span>
                                    </div>
                                    <p class="product-price" style="font-size: 25px;">
                                        @ViewBag.product.Price.ToString("C0", new System.Globalization.CultureInfo("vi-VN"))<strike style="color:rgba(128, 128, 128, 0.658); font-size: 18px;">
                                        </strike>
                                    </p>
                                    <div class="color-phone">
                                        @foreach (var item in ViewBag.productColor.ProColorName.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
                                        {
                                            <a href="javascript:void(0);" class="current-color" data-color="@item" onclick="selectColor('@item')">
                                                <span>@item</span>
                                            </a>
                                        }
                                    </div>
                                    <div>
                                        <a id="addToCart" href="@Url.Action("AddToCart", "Cart", new { productId = ViewBag.product.ProductId, quantity = 1 })" class="btn btn-default">
                                            <i class="fa fa-shopping-cart"></i>&nbsp;Thêm vào giỏ hàng
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="box-head scroll-nav">
                    <div class="head-title">
                        <a class="page-scroll active" href="#product">Mô tả sản phẩm</a>
                        <a class="page-scroll" href="#rating">Đánh giá và nhận xét</a>
                        <a class="page-scroll" href="#review">Thêm nhận xét</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- highlights -->
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <div class="description-details">
                    <div class="description-right">
                        <h2 class="dgctpro">Thông số kĩ thuật</h2>
                        <table class="charactestic_table">
                            <tbody>
                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Hệ điều hành:
                                    </td>
                                    <td class="content_charactestic">
                                        @ViewBag.product.System
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Màn hình:
                                    </td>
                                    <td class="content_charactestic">
                                        @ViewBag.product.Display
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Mặt kính cảm ứng:
                                    </td>
                                    <td class="content_charactestic">
                                        Gorilla Glass
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Màn hình rộng:
                                    </td>
                                    <td class="content_charactestic">
                                        @ViewBag.product.Display
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Độ phân giải:
                                    </td>
                                    <td class="content_charactestic">
                                        1170 x 2532 pixels, 19.5:9
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Ram:
                                    </td>
                                    <td class="content_charactestic">
                                        6GB
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Bộ nhớ trong:
                                    </td>
                                    <td class="content_charactestic">
                                        128GB
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        CPU:
                                    </td>
                                    <td class="content_charactestic">
                                        @ViewBag.product.Cpu
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Chip đồ họa (GPU):
                                    </td>
                                    <td class="content_charactestic">
                                        Apple GPU (5 nhân)
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Camera Sau:
                                    </td>
                                    <td class="content_charactestic">
                                        @ViewBag.product.RearCamera
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Camera trước:
                                    </td>
                                    <td class="content_charactestic">
                                        @ViewBag.product.FrontCamera
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Thẻ sim:
                                    </td>
                                    <td class="content_charactestic">
                                        1 SIM (Nano-SIM và/hoặc eSIM) hoặc 2 SIM (2 Nano-SIM)
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Thẻ nhớ ngoài:
                                    </td>
                                    <td class="content_charactestic">
                                        Không
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Dung lượng pin:
                                    </td>
                                    <td class="content_charactestic">
                                        Sạc nhanh 20W, đầy 50% trong 30 phút
                                    </td>
                                </tr>

                                <tr>
                                    <td class="title_charactestic" width="30%">
                                        Màu sắc:
                                    </td>
                                    <td class="content_charactestic">
                                        <span>@ViewBag.productColor.ProColorName</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <div id="rating">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                            <div class="box container-rating-review">
                                <div class="box-head">
                                    <h3 class="head-title">Đánh giá và nhận xét</h3>
                                </div>
                                <div class="box-body">
                                    <div class="row review-box">
                                        @foreach (var item in ViewBag.comment)
                                        {
                                            <div class="customer-reviews">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <p class="reviews-text"><span class="text-default">@item.CustomerName</span> </p>
                                                    <p>@item.Content</p>
                                                </div>
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="divider-line"></div>
                                                </div>
                                            </div>
                                        }

                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>

                    <div id="review">
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="box">
                                    <div class="box-head">
                                        <h3 class="head-title">Đánh giá và nhận xét của bạn</h3>
                                    </div>
                                    <div class="box-body">
                                        <div class="row">
                                            <div class="review-form">

                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 review-left">
                                                    <div class="review-rating">
                                                        <h4>Đánh giá của bạn về sản phẩm này</h4><br />
                                                        <div class="star-rate" id="rateYo"></div>
                                                    </div>
                                                </div>
                                                <form class="review-right" asp-action="CreatComment" asp-controller="UserProduct">
                                                    <input type="hidden" value="@ViewBag.product.ProductId" name="ProductId" />
                                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label class="control-label sr-only " for="name"></label>
                                                            <input id="name" type="text" class="form-control"
                                                                   placeholder="Họ và tên" required="" name="CustomerName">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label class="control-label sr-only " for="textarea"></label>
                                                            <textarea class="form-control" id="textarea" name="Content"
                                                                      rows="4" placeholder="Mời bạn nhập bình luận"></textarea>
                                                        </div>
                                                        <button id="submit" name="singlebutton" class="btn btn-primary">
                                                            Gửi
                                                            đánh giá
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.reviews-form -->

                </div>
            </div>
        </div>
        <!-- rating reviews  -->
    </div>
</div>
<script>
    let selectedColor = 'Đen'; // Set default color to black

    function selectColor(color) {
        selectedColor = color; // Update selected color

        // Get productId as a string
        const productId = '@ViewBag.product.ProductId';
        const quantity = 1;

        // Update the URL for the "Add to Cart" button
        const addToCartUrl = `@Url.Action("AddToCart", "Cart")?productId=${productId}&quantity=${quantity}&color=${encodeURIComponent(selectedColor)}`;

        document.getElementById('addToCart').setAttribute('href', addToCartUrl);
    }

    // Call this function when the page loads to ensure the default color is set
    window.onload = function () {
        const productId = '@ViewBag.product.ProductId';
        const quantity = 1;
        const addToCartUrl = `@Url.Action("AddToCart", "Cart")?productId=${productId}&quantity=${quantity}&color=${encodeURIComponent(selectedColor)}`;
        document.getElementById('addToCart').setAttribute('href', addToCartUrl);
    };
</script>
